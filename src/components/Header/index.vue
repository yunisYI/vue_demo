<template>
  <div class="header-wrap">
    <div class="header">
      <div class="header-left">
        <ul>
          <li>
            <svg t="1677401340421" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1901" width="200" height="200"><path d="M446.272 573.44a509.653333 509.653333 0 0 1-81.92-100.650667c67.786667-30.474667 112.138667-93.461333 112.138667-169.792C476.48 194.592 388.96 106.666667 280.906667 106.666667 170.058667 106.666667 85.333333 188.746667 85.333333 302.997333c0 158.250667 82.56 328.554667 200.618667 439.658667 100.010667 94.122667 258.986667 161.738667 413.461333 174.570667 0.832 0.074667 1.674667 0.106667 2.517334 0.106666h41.162666a30.517333 30.517333 0 0 0 0-61.045333h-39.872c-140.672-11.978667-286.026667-73.930667-375.456-158.090667-106.410667-100.16-181.408-254.837333-181.408-395.2 0-80.106667 56.981333-135.285333 134.549334-135.285333 74.282667 0 134.549333 60.533333 134.549333 135.285333 0 60.309333-40.896 107.989333-103.008 123.349334a30.517333 30.517333 0 0 0-19.786667 43.658666c27.573333 53.312 66.037333 104.426667 111.573334 147.690667 51.264 48.693333 109.941333 86.112 172.053333 108.16a30.506667 30.506667 0 0 0 40.362667-24.064c10.453333-67.093333 61.621333-114.026667 126.442666-114.026667 74.272 0 134.549333 60.544 134.549334 135.285334 0 25.578667-7.04 50.026667-20.149334 71.253333a30.528 30.528 0 0 0 51.925334 32.074667A196.096 196.096 0 0 0 938.666667 723.050667c0-108.394667-87.530667-196.330667-195.573334-196.330667-83.072 0-151.210667 52.384-177.621333 128.864-42.368-19.552-82.773333-47.541333-119.2-82.144z" fill="#4b4b4b" p-id="1902"></path></svg>
          </li>
          <li>
            400-000-0000(9:00-20:00)
          </li>
          <li>
            <a href="index.html">关注我们</a>
          </li>
          <li>
            <svg t="1677401309446" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1501" width="200" height="200"><path d="M507.722667 393.525333c3.018667-0.202667 5.685333-0.618667 7.594666-1.141333 15.626667-12.458667 47.68-28.864 76.8-37.802667 48-14.72 90.24-12.16 118.421334 18.688 8.490667 9.301333 14.346667 19.562667 17.386666 30.698667 6.314667 23.04 2.453333 37.184-11.754666 69.248-10.506667 23.722667-11.146667 29.888-3.808 39.530667 4.896 6.410667 10.432 8.917333 22.293333 10.24 3.157333 0.362667 5.749333 0.554667 12.373333 0.96 57.472 3.605333 84.970667 26.922667 84.970667 98.538666 0 86.901333-60.821333 158.005333-160.138667 208.64C592.554667 871.530667 491.818667 896 415.072 896c-90.773333 0-175.872-18.026667-237.312-59.882667C93.546667 778.752 63.68 683.445333 101.514667 553.536c30.154667-103.541333 158.357333-246.88 279.114666-298.4 27.082667-11.562667 61.685333-13.962667 86.709334-1.706667 38.378667 18.773333 44.693333 61.184 20.128 111.946667-9.525333 19.68-8.576 22.368-0.426667 25.525333 5.514667 2.133333 13.226667 3.104 20.682667 2.624z m-77.866667-56.021333c6.293333-13.013333 8.597333-22.101333 8.341333-27.018667-6.613333-2.368-21.568-1.130667-32.458666 3.52C302.528 358.026667 187.733333 486.4 162.965333 571.424c-30.368 104.245333-9.557333 170.656 50.826667 211.786667C262.56 816.448 335.978667 832 415.072 832c66.592 0 157.365333-22.048 227.722667-57.898667C722.944 733.248 768 680.565333 768 622.485333c0-12.224-1.12-21.141333-2.986667-27.029333-1.002667-3.168-1.76-4.373333-2.24-4.768-1.226667-1.056-5.418667-1.962667-19.744-2.858667a283.594667 283.594667 0 0 1-15.498666-1.237333c-27.701333-3.093333-49.088-12.768-66.069334-35.061333-25.749333-33.781333-22.901333-61.141333-3.808-104.234667 7.904-17.856 9.397333-23.317333 8.544-26.432-0.277333-1.034667-1.056-2.4-2.912-4.426667-7.125333-7.797333-25.525333-8.917333-52.384-0.672-12.373333 3.797333-25.301333 9.258667-37.130666 15.445334-9.12 4.768-16.714667 9.578667-18.837334 11.445333-19.178667 16.821333-60.981333 19.541333-90.986666 7.936-44.064-17.056-59.456-60.672-34.08-113.088z m505.834667 85.610667a32 32 0 1 1-63.253334-9.706667C873.92 403.733333 874.666667 393.92 874.666667 384c0-106.037333-85.962667-192-192-192-2.794667 0-5.578667 0.064-8.352 0.181333a32 32 0 1 1-2.730667-63.946666c3.690667-0.16 7.381333-0.234667 11.082667-0.234667 141.386667 0 256 114.613333 256 256 0 13.173333-1.002667 26.24-2.976 39.114667z m-104.288-14.976a32 32 0 1 1-63.744-5.717334A85.333333 85.333333 0 0 0 682.666667 309.333333a32 32 0 0 1 0-64c82.474667 0 149.333333 66.858667 149.333333 149.333334 0 4.512-0.202667 9.013333-0.597333 13.472z" fill="#4b4b4b" p-id="1502"></path></svg>
          </li>
          <li>
            <svg t="1677401288012" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1209" width="200" height="200"><path d="M767.818667 409.173333C867.338667 444.266667 938.666667 539.136 938.666667 650.666667c0 42.709333-10.496 83.978667-30.261334 120.842666-1.792 3.338667-4.992 8.928-9.696 16.96l14.613334 53.557334c6.506667 23.893333-15.402667 45.813333-39.296 39.296l-53.642667-14.634667-6.229333 3.669333A254.933333 254.933333 0 0 1 682.666667 906.666667c-77.994667 0-147.84-34.88-194.805334-89.888a352.608 352.608 0 0 1-56.64 4.554666c-63.338667 0-124.266667-16.853333-177.472-48.298666-1.834667-1.088-6.410667-3.733333-13.632-7.893334l-80.544 21.653334c-23.914667 6.432-45.76-15.573333-39.146666-39.434667l21.792-78.752a961.205333 961.205333 0 0 1-15.904-27.317333A336.384 336.384 0 0 1 85.333333 480c0-188.618667 154.965333-341.333333 345.888-341.333333 159.914667 0 297.984 108.010667 335.818667 259.296 0.949333 3.765333 1.173333 7.552 0.778667 11.2z m-68.106667-13.952C662.88 282.037333 555.178667 202.666667 431.221333 202.666667 275.434667 202.666667 149.333333 326.933333 149.333333 480c0 46.272 11.498667 90.837333 33.194667 130.698667 2.88 5.290667 10.176 17.706667 21.621333 36.746666a32 32 0 0 1 3.413334 25.013334l-10.517334 37.994666 39.232-10.549333a32 32 0 0 1 24.234667 3.146667c14.272 8.192 22.773333 13.098667 25.802667 14.890666A283.882667 283.882667 0 0 0 431.221333 757.333333c6.154667 0 12.288-0.192 18.389334-0.576A255.061333 255.061333 0 0 1 426.666667 650.666667c0-141.386667 114.613333-256 256-256 5.728 0 11.413333 0.192 17.045333 0.554666z m133.706667 397.056a32 32 0 0 1 3.338666-24.725333 996.672 996.672 0 0 0 15.242667-26.293333A190.997333 190.997333 0 0 0 874.666667 650.666667c0-106.037333-85.962667-192-192-192s-192 85.962667-192 192 85.962667 192 192 192a190.933333 190.933333 0 0 0 98.570666-27.2c2.208-1.322667 8.288-4.874667 18.517334-10.837334a32 32 0 0 1 24.522666-3.210666l12.565334 3.424-3.424-12.565334zM330.666667 426.666667a42.666667 42.666667 0 1 1 0-85.333334 42.666667 42.666667 0 0 1 0 85.333334z m192 0a42.666667 42.666667 0 1 1 0-85.333334 42.666667 42.666667 0 0 1 0 85.333334z m85.333333 202.666666a32 32 0 1 1 0-64 32 32 0 0 1 0 64z m149.333333 0a32 32 0 1 1 0-64 32 32 0 0 1 0 64z" fill="#4b4b4b" p-id="1210"></path></svg>
          </li>
        </ul>
      </div>  
      <div class="header-right" v-if="!userNum">
        <router-link to="/login">登陆</router-link> | 
        <router-link to="/signup">注册</router-link>
      </div>
      <div class="header-right" v-else>
        <a>{{ userNum }}&nbsp;&nbsp;&nbsp;</a>
        <a @click="logOut">退出登陆</a>
      </div>
    </div>
    <div class="nav-wrapper">
      <div class="nav" >
        <div class="logo-wrapper">
          <div>LOGO</div>
        </div>
        <ul>
            <li :style="{ 'border-bottom': routePath === '/' ? '3px solid white' : '' }" ><router-link to="/"  >首页</router-link></li>
            <li :style="{ 'border-bottom': routePath === 'bookstore' ? '3px solid white' : '' }"><router-link to="/bookstore">书城</router-link></li>
            <li :style="{ 'border-bottom': routePath === 'after-sales' ? '3px solid white' : '' }"><router-link to="/after-sales">售后服务</router-link></li>
            <li><a href="">关于我们</a></li>
            <li><a href="">招商合作</a></li>
            <li><a href="">新闻中心</a></li>
            <li>
              <a>
                <div class="red-dot" v-if="shopCartCount >= 1">{{ shopCartCount }}</div>
                <svg t="1677408242326" class="icon"  viewBox="0 0 1026 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3862" width="200" height="200"><path d="M763.904 892.928c24.576 0 45.056 20.48 45.056 45.056 0 24.576-20.48 45.056-45.056 45.056-24.576 0-45.056-20.48-45.056-45.056C718.848 913.408 739.328 892.928 763.904 892.928M763.904 851.968c-47.104 0-86.016 38.912-86.016 86.016 0 47.104 38.912 86.016 86.016 86.016 47.104 0 86.016-38.912 86.016-86.016C849.92 889.856 811.008 851.968 763.904 851.968L763.904 851.968z" p-id="3863" fill="#ffffff"></path><path d="M366.592 892.928c24.576 0 45.056 20.48 45.056 45.056 0 24.576-20.48 45.056-45.056 45.056-24.576 0-45.056-20.48-45.056-45.056C320.512 913.408 340.992 892.928 366.592 892.928M366.592 851.968c-47.104 0-86.016 38.912-86.016 86.016 0 47.104 38.912 86.016 86.016 86.016 47.104 0 86.016-38.912 86.016-86.016C452.608 889.856 413.696 851.968 366.592 851.968L366.592 851.968z" p-id="3864" fill="#ffffff"></path><path d="M186.368 76.8c5.12 0 9.216 3.072 11.264 7.168l58.368 102.4 702.464 0c13.312 0 19.456 8.192 21.504 12.288 2.048 4.096 6.144 13.312 0 24.576L785.408 545.792c-4.096 7.168-12.288 12.288-20.48 12.288L358.4 558.08l-64.512 103.424c-11.264 17.408-11.264 38.912-1.024 56.32 10.24 17.408 27.648 28.672 48.128 28.672l525.312 0c7.168 0 13.312 6.144 13.312 13.312 0 7.168-6.144 13.312-13.312 13.312l-522.24 0c-21.504 0-41.984-6.144-55.296-18.432-32.768-27.648-39.936-72.704-18.432-107.52l68.608-110.592L137.216 104.448 54.272 104.448C47.104 104.448 40.96 98.304 40.96 90.112c0-7.168 6.144-13.312 13.312-13.312L186.368 76.8M186.368 35.84 54.272 35.84C24.576 35.84 0 60.416 0 90.112c0 29.696 24.576 54.272 54.272 54.272l57.344 0 182.272 388.096-57.344 92.16c-31.744 51.2-23.552 119.808 26.624 160.768 22.528 19.456 52.224 27.648 81.92 27.648l522.24 0c29.696 0 54.272-24.576 54.272-54.272 0-29.696-24.576-54.272-54.272-54.272L342.016 704.512c-7.168 0-11.264-4.096-12.288-7.168-2.048-3.072-3.072-9.216 0-14.336l52.224-83.968 384 0c22.528 0 44.032-12.288 56.32-31.744l193.536-323.584c25.6-44.032-5.12-99.328-56.32-99.328L279.552 144.384l-47.104-81.92C223.232 47.104 205.824 35.84 186.368 35.84L186.368 35.84z" p-id="3865" fill="#ffffff"></path></svg>
              </a>
            </li>
          </ul>
      </div>
    </div>
  </div>
</template>

<script>
// 顶部-需要注册为全局组件
export default {
  name: "Header",
  data() {
    return {
      routePath: '',
    }
  },
  computed: {
    userNum() {
      // 如果没有 router自动使用token获取信息
      return this.$store.getters.userInfo.usernumber
    },
    shopCartCount() {
      // 计算购物车内商品数量
      return this.$store.getters.shopCartInfo.length
    }
  },
  methods: {
    logOut() {
      this.$store.dispatch('logOut').then(() => {
        this.$router.go(0)
      }).catch(err => {
        alert(err)
      })
    }
  },
  mounted() {
    // 监听路由路径的改变
    this.$bus.$on('pathChange', (val) => {
      this.routePath = val
    })
  },
}
</script>

<style lang="less" scoped>
.header-wrap {
  height: 90px;
}

.header {
  max-width: 1175px;
  height: 25px;
  line-height: 25px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 10px;
  clear: both;

  ul {
    height: 100%;
    width: 100%;

    li {
      float: left;
      height: 30px;
      line-height: 30px;

      &:nth-child(1) {
        svg {
          margin-right: 5px;
          margin-left: 0;
        }
      }

      &:nth-child(2) {
        margin-right: 30px;
      }

      svg {
        height: 25px;
        width: 25px;
        margin-left: 5px;
      }
    }
  }


}

.nav-wrapper {
  width: 100%;
  background-color: #333;
  // position: sticky;
  // top: 0;
}

.nav {
  margin: 0 auto;
  max-width: 1175px;
  height: 65px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: white;
  font-size: 16px;

  ul {
    width: 50%;
    height: 100%;
    clear: both;
    display: flex;
    flex-direction: row;
    justify-content: space-between;

    li {
      height: 100%;
      line-height: 65px;
      width: 70px;
      text-align: center;
      float: left;
      box-sizing: border-box;
      transition: all .1s linear;
      border-bottom: none;
      padding-top: 3px;

      &:hover {
        border-bottom: 3px solid white;
      }

      a {
        display: inline-block;
        height: 100%;
        width: 100%;
        color: #f6f6f6;
      }

      &:nth-last-child(1) {
        width: 45px;
        position: relative;

        div.red-dot {
          position: absolute;
          width: 15px;
          height: 15px;
          border-radius: 50%;
          background-color: red;
          color: #fff;
          top: 6px;
          right: 0px;
          font-size: 8px;
          line-height: 15px;
          padding-right: 2px;
          text-align: center;
        }

        svg {
          height: 28px;
          width: 28px;
          margin-top: 18px;
        }
      }
    }
  }
}
</style>